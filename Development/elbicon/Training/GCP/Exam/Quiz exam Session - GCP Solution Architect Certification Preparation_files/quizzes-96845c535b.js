function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){function e(t,n,i){function s(a,r){if(!n[a]){if(!t[a]){var d="function"==typeof require&&require;if(!r&&d)return d(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return s(n||e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)s(i[a]);return s}return e}()({1:[function(e,t,n){window._parseURL=function(e){var t,n,i,s=document.createElement("a"),o={};for(s.href=e,t=s.search.replace(/^\?/,"").split("&"),i=0;i<t.length;i++)n=t[i].split("="),o[n[0]]=n[1];return{protocol:s.protocol,host:s.host,hostname:s.hostname,port:s.port,pathname:s.pathname,search:s.search,searchObject:o,hash:s.hash}}},{}],2:[function(e,t,n){e("./01-parse-url.js"),e("./bookmarks.js"),e("./quiz-session.js"),e("./quiz-session-config.js"),e("./quiz-session-results.js"),e("./models/session.js"),e("./main.js"),e("./results.js")},{"./01-parse-url.js":1,"./bookmarks.js":3,"./main.js":4,"./models/session.js":5,"./quiz-session-config.js":6,"./quiz-session-results.js":7,"./quiz-session.js":8,"./results.js":9}],3:[function(e,t,n){$(function(){function e(e,t){return API.post("explanation-bookmarked",t,null,{explanation_id:e})}function t(e,t){return API["delete"]("explanation-bookmark",t,{pk:e})}window.corn&&corn.currentUser&&$("body").on("click",".explanation .pin",function(n){n.preventDefault();var i=$(this),s=$(this).closest(".explanation"),o=s.data("id");return $("body#quiz-session").length&&i.removeClass("pin"),o?void(s.hasClass("pinned")?t(o,function(){s.removeClass("pinned").trigger("unpinned")}):e(o,function(){s.addClass("pinned").trigger("pinned")})):console.log("Missing Explanation ID")})})},{}],4:[function(e,t,n){$(function(){function e(){$.scrollTo($(".js-quiz-session").first(),{duration:200})}function t(){$('[data-toggle="popover"]').popover("hide"),e()}function n(){$(".js-feedback-wrapper").removeClass("feedback-given"),$('[data-toggle="popover"]').popover()}var i=$(".js-quiz-session"),s=$(".lp-bar");if(i.length&&clouda.quizzes.quizSession){var o={};s.length&&(o={learning_path_id:s.data("learning-path-id"),learning_path_step_id:s.data("learning-path-step-id")});var a=new clouda.quizzes.models.Session(clouda.quizzes.quizSession,{onNext:t,onLoad:n,onAnswer:e,onExplanation:t,apiParams:o,queryParams:window.location.search});ko.applyBindings(a,i[0]),a.init(),i.on("pinned",".explanation",function(){var e=$(this).find(".js-explanation-save-link");e.addClass("pin"),e.popover("show")}).on("unpinned",".explanation",function(){var e=$(this).find(".js-explanation-save-link");e.addClass("pin"),e.popover("hide")})}})},{}],5:[function(e,t,n){clouda.quizzes||(clouda.quizzes={}),clouda.quizzes.models||(clouda.quizzes.models={}),clouda.quizzes.models.Session=function(e,t){function n(){var e=window._parseURL(window.location.href),t=e.searchObject;if(!t)return null;var n=t.context_id,i=t.context_resource;return n&&i&&"lp"!==!i?{context_id:parseInt(n,10),context_resource:"lp"}:null}function i(t){return{pk:e.id,question_id:t.id}}function s(e){return _.extend({},t.apiParams,e)}function o(e){c&&clearInterval(c),e.isCompleted(!0),API.post(l.endpoint,null,i(e),s({action:"timeout"}),null,function(e){a(e),t.onNext&&t.onNext()})}function a(e){if(l.isExam()&&e&&200===e.status){var t=l.quizSession.id,n=e._id,i=d("examAnswers");try{delete i[t][n],r("examAnswers",i)}catch(s){console.error("Error setting new sessionStorage for exam (clear successful).")}}e=e||{};var o=l.activeQuestion(),a=e.responseJSON||{};o.selected_answers_ids(e.selected_answers_ids||a.selected_answers_ids),o.correct_answers_ids(e.correct_answers_ids||a.correct_answers_ids)}function r(e,t){try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){throw n}}function d(e){var t=l.quizSession.id,n={},i=_defineProperty({},t,{}),s=window.sessionStorage.getItem(e)||JSON.stringify(i);try{n=Object.assign(n,JSON.parse(s))}catch(o){n=_defineProperty({},t,{})}return n}function u(e){var t=d("examAnswers");t[e]&&Object.keys(t).forEach(function(n){Number(n)===Number(e)&&delete t[n]});try{r("examAnswers",t)}catch(n){console.error("Error setting new sessionStorage for exam (clear session).")}}if(t=t||{},!e)throw"No quiz session given to Session model";var l=this,c=null,f=null,p=null,m="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),g=3,v=3;l.quizSession=e,l.loading=ko.observable(!0),l.queryParams=t.queryParams,l.endpoint="quizsessions-"+e.type+"-(?P<question-id>\\d+)",l.examSubmitEndpoint="quizsessions-exam-submit",l.examDiscardEndpoint="quizsessions-exam-detail",_.each(e.questions,function(e){e.isCompleted=ko.observable(e.is_completed)}),l.questionsStartDates={},l.questions=ko.observableArray(e.questions),l.activeQuestionIndex=ko.observable(0),l.timeLeft=ko.observable(),l.explanationMode=ko.observable(!1),l.skipToNextMode=ko.observable(!1),l.explanationTimeLeft=ko.observable(-1),l.skipToNextTimeLeft=ko.observable(-1),l.highlightQuizScore=ko.observable(!1),l.getQuestionFromIndex=function(e){return l.questions()[e]},l.activeQuestion=ko.computed(function(){var e=l.getQuestionFromIndex(l.activeQuestionIndex());return e.answers?e:null}),l.normalizeQuestion=function(e){e.selected_answers_ids=ko.observableArray(e.selected_answers_ids||[]);var t=e.selected_answers_ids().map(function(e){return e+""});return e.selectedAnswers=ko.observableArray(t),e.correct_answers_ids=ko.observableArray(e.correct_answers_ids||[]),e.isCompleted=ko.observable("0"!==e.selected_answers_ids().join(",")&&e.selected_answers_ids().length>0||e.correct_answers_ids().length>0),e.question_feedback=new clouda.components.feedback({entity_type:"question",entity_id:e.question_id,entity_session_id:clouda.quizzes.quizSession.id,context:l.isExam()?"exam":"quiz",context_entity_type:clouda.quizzes.quizSession.is_exam?"exam":"quiz",context_entity_id:clouda.quizzes.quizSession.quiz_config}),clouda.quizzes.quizSession.is_exam||clouda.quizzes.quizSession.is_test||(e.explanation_feedback=new clouda.components.feedback({entity_type:"explanation",entity_id:e.explanation_id,entity_session_id:clouda.quizzes.quizSession.id,context:"quiz",context_entity_type:clouda.quizzes.quizSession.is_exam?"exam":"quiz",context_entity_id:clouda.quizzes.quizSession.quiz_config})),_.each(e.answers,function(e,t){e.letter=m[t]}),e},l.setQuestion=function(e){var t=l.normalizeQuestion(e);return l.questions.splice(_.findIndex(l.questions(),{id:e.id}),1,t),t},l.getQuestionIndexFromId=function(e){return _.findIndex(l.questions(),{id:e})},l.getQuestionFromId=function(e){return l.getQuestionFromIndex(l.getQuestionIndexFromId(e))},l.setActiveQuestion=function(e){l.activeQuestionIndex(l.getQuestionIndexFromId(e.id))},l.loadQuestion=function(e){return!l.isLocked()&&(l.resetExplanationInterval(),l.resetSkipToNextInterval(),l.getQuestionFromId(e.id).answers?(t.onLoad&&t.onLoad(),l.setActiveQuestion(e),l.explanationMode(!1),l.skipToNextMode(!1),!0):(API.get(l.endpoint,function(e){$("#fe-question-error").html(""),l.loading(!1),l.setQuestion(e),l.setActiveQuestion(e),l.explanationMode(!1),l.skipToNextMode(!1),l.questionsStartDates=_defineProperty({},e.id,(new Date).getTime()/1e3),"undefined"==typeof e.seconds||l.isExam()||(l.timeLeft(e.seconds),c&&clearInterval(c),c=setInterval(function(){var e=l.timeLeft();e=Math.max(0,--e),l.timeLeft(e),c&&e<=0&&o(l.activeQuestion())},1e3)),l.isFirstQuestion()&&l.isTest()&&(l.highlightQuizScore(!0),setTimeout(function(){l.highlightQuizScore(!1)},5e3)),t.onLoad&&t.onLoad(),document.getElementById&&(document.getElementById("link-quiz-button-skip-question")&&document.getElementById("link-quiz-button-skip-question").classList.remove("disabled"),document.getElementById("link-quiz-button-next-question")&&document.getElementById("link-quiz-button-next-question").classList.remove("disabled"))},i(e),{},function(t,n,i){console.error("Error getting question",e.id,n),$("#fe-question-error")&&$("#fe-question-error").html('It seems that there are issues with your internet connection.<br /><span class="fe-question-error-fake-link" onClick="window.location.reload();">Click here to try again</span>. If it persists please contact our support.')}),!1))},l.jumpToQuestion=function(t){if(!e.is_test)return l.loadQuestion(t)},l.hasNotCompleted=function(){return l.getNextNotCompleted()!==!1||!(l.activeQuestion()&&l.activeQuestion().isCompleted())},l.getNextNotCompleted=function(){for(var e=l.activeQuestionIndex(),t=l.questions(),n=e+1;n<t.length;n++)if(t[n].isCompleted()===!1)return n;for(var n=0;n<e;n++)if(t[n].isCompleted()===!1)return n;return!1},l.getTotalOfNotCompleted=function(){return l.questions().reduce(function(e,t){return t.isCompleted()?e:++e},0)},l.prevQuestion=function(){var e=l.activeQuestionIndex();e>0&&l.jumpToQuestion(l.getQuestionFromIndex(e-1))},l.toggleExplanation=function(){l.resetExplanationInterval(),l.explanationMode(!l.explanationMode()),t.onExplanation&&t.onExplanation()},l.resetExplanationInterval=function(){f&&(l.explanationTimeLeft(-1),clearInterval(f))},l.resetSkipToNextInterval=function(){p&&(l.skipToNextTimeLeft(-1),clearInterval(p))},l.locked=ko.observable(!1),l.isLocked=function(){return l.locked()===!0},l.lock=function(){return l.locked(!0)},l.unlock=function(){return l.locked(!1)},l.isSelectedAnswer=function(e){var t=l.activeQuestion();return t.selectedAnswers()===e+""||_.contains(t.selectedAnswers(),e+"")||_.contains(t.selected_answers_ids(),e)},l.answer=function(){var e=l.answerLogic();return e!==!1},l.setCompleteQuestion=function(e){document.getElementById("link-quiz-button-skip-question")&&document.getElementById("link-quiz-button-skip-question").classList.add("disabled"),c&&!l.isExam()&&clearInterval(c),setTimeout(function(){var o=l.getSelectedAnswersIds();if(o=_.map(o,function(e){return parseInt(e)}),l.isExam()){var u=l.activeQuestion().id,c=l.quizSession.id,m=d("examAnswers");m[c]||(m[c]={}),m[c][u]={answer_ids:o,sdate:l.questionsStartDates[u],fdate:(new Date).getTime()/1e3};try{r("examAnswers",m)}catch(x){console.error("Error setting new sessionStorage for exam (setting answers).")}}API.post(l.endpoint,a,i(e),s({action:"answer",answer_ids:o}),a,function(){e.isCompleted(!0),l.isStudy()&&(f&&clearInterval(f),l.explanationTimeLeft(g),f=setInterval(function(){var e=l.explanationTimeLeft();e--,0===e?(clearInterval(f),f=null,l.explanationTimeLeft(-1),l.explanationMode(!0),t.onExplanation&&t.onExplanation()):l.explanationTimeLeft(e)},1e3)),l.isTest()&&(p&&clearInterval(p),l.skipToNextTimeLeft(v),p=setInterval(function(){var e=l.skipToNextTimeLeft();e--,0===e?(clearInterval(p),p=null,l.skipToNextTimeLeft(-1),l.skipToNextMode(!0),l.loadNextQuestion()):l.skipToNextTimeLeft(e)},1e3)),l.unlock(),t.onAnswer&&t.onAnswer()},n())},0)},l.setUnCompleteQuestion=function(e){e.isCompleted()?setTimeout(function(){API["delete"](l.endpoint,a,i(e),null,function(){e.isCompleted(!1),l.unlock()})},0):l.unlock()},l.getSelectedAnswersIds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=l.activeQuestion(),n=t&&t.selectedAnswers();return n?(_.isArray(n)||(n=[n]),n.map(function(t){return e?parseInt(t):t+""})):[]},l.answerLogic=function(){var e=l.activeQuestion();if(e.isAnswerable!==!1||l.isExam()){var t=l.getSelectedAnswersIds();if(t.length!==e.correct_answers_count||l.isExam()||(e.isAnswerable=!1),l.isExam()){if(l.timeLeft()<1)return!1;t.length>e.correct_answers_count&&(t.shift(),e.selectedAnswers(t))}else if(e.isCompleted())return!1;return l.lock(),t.length!=e.correct_answers_count?l.setUnCompleteQuestion(e):l.setCompleteQuestion(e)}return!1},l.isStudy=function(){return e.is_study},l.isTest=function(){return e.is_test},l.isExam=function(){return e.is_exam},l.skipQuestion=function(){var e=l.activeQuestion();c&&clearInterval(c),e.isCompleted(!0),document.getElementById&&(document.getElementById("link-quiz-button-skip-question")&&document.getElementById("link-quiz-button-skip-question").classList.add("disabled"),document.getElementById("link-quiz-button-next-question")&&document.getElementById("link-quiz-button-next-question").classList.add("disabled")),API.post(l.endpoint,null,i(e),s({action:"skip"}),null,function(){l.loadNextQuestion()})},l.loadNextQuestion=function(){var e=l.getNextNotCompleted();return e!==!1&&(l.loadQuestion(l.getQuestionFromIndex(e)),void(t.onNext&&t.onNext()))},l.isLastQuestion=function(){return l.activeQuestionIndex()===l.questions().length-1},l.isFirstQuestion=function(){return 0===l.activeQuestionIndex()},l.redirectToResultPage=function(){l.hasNotCompleted()||l.isExam()?l.toggleModal():location.href=e.results_url},l.toggleDiscardModal=function(){$("#quiz-discard-modal-result").modal("toggle")},l.openDiscardExamModal=function(){l.isExam()?l.toggleDiscardModal():location.href=e.results_url},l.isExamSubmitted=!1,l.submitExam=function(){if(!l.isExam())return!0;if($(".submitting-loader").toggleClass("active"),clearInterval(c),!l.isExamSubmitted){var t={},n=d("examAnswers"),i=e.id;if(n[i]){var s=Object.keys(n[i]);0!==s.length&&(t={answers:s.map(function(e){var t=n[i][e];return{question_id:e,answer_ids:t.answer_ids,fdate:t.fdate,sdate:t.sdate}})})}l.isExamSubmitted=!0,API.put(l.examSubmitEndpoint,function(){u(i)},{pk:e.id},t,null,function(){l.isPublicAssessment()?location.href=l.publicAssessmentResultUrl():location.href=e.results_url},{source_call:"web"})}},l.discardSession=function(){API["delete"](l.examDiscardEndpoint,null,{pk:e.id},null,function(){location.href="/quiz/"+e.quiz_config})},l.isExamExpired=function(){return l.isExam()&&l.timeLeft()<1},l.isExamSubmittable=function(){return l.isExam()&&l.quizSession.is_exam_submittable},l.toggleModal=function(){$("#quiz-modal-results").modal("toggle")},l.modalTitle=function(){return l.isExamExpired()?"Your exam ran out of time":l.getTotalOfNotCompleted()>0?"You have "+l.getTotalOfNotCompleted()+" skipped questions":"You have completed the exam"},l.modalSubTitle=function(){return l.isExamExpired()&&l.isExamSubmittable()?"Submit it to see your results":l.isExamExpired()?"":l.getTotalOfNotCompleted()>0?"Skipping a question may alter the final score":"Submit it to see your results"},l.discardModalTitle=function(){return"Are you sure you want to discard this exam?"},l.discardModalSubTitle=function(){return"If you discard the exam, you will lose all progress, but your overall score will not be affected"},l.quitSessionText=function(){return l.isExam()?"Submit Exam":"Submit Quiz"},l.discardExamText=function(){return l.isExam()?"Discard Exam":""},l.init=function(){if(l.isExam()){l.timeLeft(clouda.quizzes.quizSession.remainingTime),l.endTime=moment().add(moment.duration(l.timeLeft(),"s"),"s");var t;c=setInterval(function(){t=l.timeLeft(),t=Math.max(0,l.endTime.diff(moment(),"s")),l.timeLeft(t),c&&t<=0&&clearInterval(c)},1e3)}l.loadQuestion(l.getQuestionFromIndex(e.current_qstep-1))},l.prettyTimeLeftText=function(){return l.timeLeft()>0?moment.duration(l.timeLeft(),"s").format("mm:ss"):"OVER"},l.showNextButtonLogic=function(){return l.hasNotCompleted()&&!l.isLastQuestion()&&(l.explanationMode()||l.activeQuestion().isCompleted())&&!(l.isExam()&&l.timeLeft()<1)},l.showResultsButtonLogic=function(){return!l.hasNotCompleted()||l.isLastQuestion()&&(l.explanationMode()||l.activeQuestion().isCompleted())},l.enabledMultipleAnswersQuestionTopBar=function(){var e=l.activeQuestion();return e&&e.correct_answers_count>1&&e.selectedAnswers().length>0&&!e.isCompleted()},l.isPublicAssessment=function(){return!!l.queryParams&&l.queryParams.indexOf("cloud-readiness")!==-1},l.publicAssessmentResultUrl=function(){return"/cloud-knowledge-evaluation/result/"+e.id+"/"}}},{}],6:[function(e,t,n){$(function(){function e(e){var t=$(e.element).data("image");return t?"<img width='25' height='25' class='tag-img pull-left' src='"+t+"'/>"+e.text:"<span class='img-placeholder'>-</span>"+e.text}var t=$(".quiz-modal"),n=t.find(".options-container"),i=t.find("form");if(t.length){n.css("opacity",1),n.on("click",".provider-select-placeholder",function(){$(this).siblings("select").select2("open")}).find("select").select2({formatResult:e,formatSelection:e,escapeMarkup:function(e){return e},closeOnSelect:!1,width:280}).on("change",function(e){var t=$(this).data("alternative");t&&$(t).select2("val",""),$(this).val()==-1&&$(this).select2("val","")}).find("option[data-image]").each(function(){$(this).data("image")&&corn.preloadImage($(this).data("image"))}),i.on("submit",function(e){e.preventDefault();var t=$.deparam(i.serialize(),!0);for(k in t)""!==t[k]&&void 0!==t[k]&&null!==t[k]||delete t[k];i.createQuizSession(t)}),i.find("button").prop("disabled",!1);var s=!1;i.find("input[name],select[name]").each(function(){var e=$(this),t=corn.getp(e.attr("name"));if(t)if(s=!0,e.is(":radio,:checkbox"))t==e.val()&&e.prop("checked",!0);else if(e.is("input"))e.val(t);else{var n=[];$.each(t.split(","),function(){e.find('[value="'+this+'"],[data-slug="'+this+'"]').each(function(){n.push($(this).attr("value")),e.select2("val",n).trigger("change")})})}}),s&&!corn.getp("source")&&i.find('input[name="source"]').val("prefill")}}),$.extend($.fn,{createQuizSession:function(e){function t(e){var t=API.getErrorMessage(e);$("<div/>",{"class":"alert",html:t}).appendClose().hide().slideDown().delayDestroy(!0).prependTo(a),n.enableButtons()}var n=$(this),i=n.data("endpoint"),s=n.data("stype"),o=n.data("redirect"),a=n.is("form")?n:n.parent();n.disableButtons(),a.find(".alert").delayDestroy(!0,0),API.post(i,function(e){e&&e._id?window.location=Urls[o]({session_id:e._id,stype:s}):t(e)},null,e,function(e){try{var n=$.parseJSON(e.responseText);t(n)}catch(i){console.error(i),t(null)}})}})},{}],7:[function(e,t,n){$(function(){var e=$("#quiz-results");if(e.length){e.find(".quiz-results-share-links").each(function(){var e="";$(".topic-name[data-hashtag]").each(function(){var t=$(this).data("hashtag");t&&e.length<25&&(e+=t+" ")});var t=$(this).text().trim();$(this).empty().share({networks:["twitter","linkedin","facebook","googleplus"],title:t,description:"Follow my link and you will earn a discount (I will too)",hashtags:e+"#Cloud @cloudacademy",innerText:"",innerHTML:'<span class="clouda-icon social-|item| pull-left"></span>'})}),e.find(".progress-input").each(function(){var e=$(this),t=e.val(),n=e.data("color");e.val(0).click(function(e){return e.preventDefault(),$(this).blur()}).show().knob({draw:function(){$(this.i).val(this.cv+"%")},readOnly:!0,min:0,max:100,width:150,height:150,thickness:.08,fgColor:n,bgColor:"#efefef"}),setTimeout(function(){$({value:0}).animate({value:t},{duration:1500,easing:"swing",progress:function(){e.val(Math.ceil(this.value)).trigger("change")}})},100)});var t=e.find(".stat-container a").each(function(){var n=$(this),i=n.text(),s=n.data("toggle-text"),o=e.find(n.data("toggle")),a=o.find(".close-review");n.click(function(e){return e.preventDefault(),n.hasClass("active")?n.trigger("disable"):(t.filter(".active").trigger("disable"),void n.trigger("enable"))}).on("enable",function(){n.addClass("active").text(s),o.stop().slideDown(700).addClass("active")}).on("disable",function(){n.removeClass("active").text(i),o.stop().slideUp(700).removeClass("active")}),a.click(function(e){e.preventDefault(),n.trigger("disable")})});e.find("#new-similar-session").click(function(e){e.preventDefault();var t=$(this),n={session_id:t.data("id")};t.createQuizSession(n)})}})},{}],8:[function(e,t,n){$(function(){var e=$(".quiz-session");if(e.length){var t=e.data("id"),n=e.data("endpoint"),i=e.data("results"),s=e.data("type"),o="study"==s,a=(e.hasClass("cert-session"),e.find(".session-steps")),r=a.children().length,d=e.find(".session-question-container"),u=e.find(".quiz-sidebar"),l=e.find(".n-of-m span"),c=e.find(".timer-txt"),f=u.find(".q-stat-correct"),p=u.find(".q-stat-wrong"),m=u.find(".feedback-container"),g=u.find(".show-explanation"),v=u.find(".back-to-question"),x=u.find(".next-question"),h=u.find(".skip-question"),w=u.find(".view-results"),_=e.data("topic")||null,q=$(".lp-bar"),b=function(){return{pk:t,question_id:e.data("qid")}},k=function(e){var t={};return q.length&&(t={learning_path_id:q.data("learning-path-id"),learning_path_step_id:q.data("learning-path-step-id")}),$.extend(t,e),t};a.on("click","[data-id]",function(t){t.preventDefault(),o&&!$(this).hasClass("active")&&e.trigger("load-question",[$(this).data("id")])}),a.find("[data-id]").hover(function(){var e=$(this),t=e.prev(),n=e.next(),i=".active,.completed";e.removeClass("no-border-left no-border-right"),t.addClass("prev"),n.addClass("next"),(t.is(i)||e.is(i))&&e.addClass("no-border-left"),(n.is(i)||e.is(i))&&e.addClass("no-border-right")},function(){var e=$(this),t=e.prev(),n=e.next();e.removeClass("no-border-left no-border-right"),t.removeClass("prev"),n.removeClass("next")}),e.on("start-session",function(){var t=e.data("step"),n=a.find('[data-step="'+t+'"]');e.trigger("load-question",[n.data("id")])}).on("load-question",function(t,i){if(!e.hasClass("loading")){if(a.find(".active").removeClass("active"),void 0===i)if(e.data("next-qid"))i=a.find('[data-id="'+e.data("next-qid")+'"]').data("id"),e.removeData("next-qid");else{if(!e.data("qid"))return;i=a.find('[data-id="'+e.data("qid")+'"]').next().data("id")}else a.find('[data-id="'+i+'"]').is(".completed")||e.removeData("next-qid");e.data("qid",i).addClass("loading").removeClass("answering explaining answered");var s=a.find('[data-id="'+i+'"]'),o=s.index()+1;if(clearTimeout(g.data("click-timeout")),o>r||!i)return void e.trigger("go-to-results");var u=b();e.data("step",o).trigger("pre-question"),corn.renderAPI(n,u,d,"quiz-template",{topic:_},k({}),null,function(t){NProgress.done(),$("html,body").stop().animate({scrollTop:e.offset().top},200),e.removeClass("loading init timeout"),s.addClass("active"),t.step&&e.data("step",t.step),l.text(e.data("step"));var n=r-1<=a.find(".completed").length;n?e.addClass("last-question"):e.removeClass("last-question"),e.trigger("render-tags",[t]),t.perc_correct&&(f.text(t.perc_correct+"%"),p.text((t.perc_wrong||100-t.perc_correct)+"%")),0===t.status?e.data("answered",!1).trigger("question-started",[t]):e.data("answered",!0).trigger("after-answer",[t]),0===t.seconds&&(clouda.track("timeout",{category:"quiz",label:"old"},null,{GOOGLE_TAG_MANAGER:!0}),e.trigger("timeout",[t]))},!1,function(t,n,i){e.removeClass("loading"),400==t.status&&t.responseJSON&&t.responseJSON.completed===!0&&e.trigger("go-to-results")})}}).on("question-started",function(t,n){if(e.addClass("answering"),void 0!==n.seconds){e.data("timer",n.seconds).data("timer-max",n.timer).trigger("stop-timer");var i=function(){c.text(e.data("timer"))};n.seconds>0&&e.data("timer-interval",setInterval(function(){e.data("timer",e.data("timer")-1),i(),e.data("timer")<=0&&e.trigger("stop-timer").trigger("timeout")},1e3)),i()}}).bind("stop-timer",function(){e.data("timer-interval")&&clearInterval(e.data("timer-interval"))}).on("render-tags",function(t,n){if(n.provider){var i=corn.findItem(n.provider,e.data("tags"));d.find(".provider-name").text(i.extended_name||i.name),d.find(".provider-image").attr("src",i.image)}if(n.tags){var s=u.find(".tags-list");$.each(n.tags,function(){var t=corn.findItem(this,e.data("tags"));if(t.product||t["public"]){var n=$("<span/>").addClass("tag-item").text(t.name);s.append($("<li/>").append(n))}})}}).on("click",".q-answers a",function(t){if(t.preventDefault(),!e.data("answered")){var i=$(this),s=i.data("id");e.data("answered",!0).data("answer_id",s).trigger("stop-timer"),NProgress.start(),API.post(n,function(t){NProgress.done(),e.trigger("after-answer",[t]),g.trigger("will-click")},b(),k({answer_id:s,action:"answer"}),function(t,n,i){NProgress.done();try{var s=t.responseJSON||JSON.parse(t.responseText);e.trigger("after-answer",[s]),g.trigger("will-click")}catch(o){}})}}).bind("skip",function(t){var i=parseInt(c.text()),s=e.data("timer-max"),o=3*Math.floor((s-i)/3);clouda.track("skip",{category:"quiz",label:"total"+s,value:o},null,{GOOGLE_TAG_MANAGER:!0}),e.data("answered",!0).trigger("stop-timer"),API.post(n,function(t){e.trigger("after-answer",[t]).trigger("load-question")},b(),k({action:"skip"}))}).bind("timeout",function(t,i){e.data("answered",!0).addClass("answered").addClass("timeout"),c.text("Time Out!"),void 0!==i?e.trigger("after-answer",[i]):API.post(n,function(e){},b(),k({action:"timeout"}),function(t,n,i){try{var s=t.responseJSON||JSON.parse(t.responseText);e.trigger("after-answer",[s])}catch(o){}})}).on("after-answer",function(t,n){if(e.removeClass("answering").addClass("answered"),n.correct_id){var i=n.correct_id==n.answer_id;void 0!==n.answer_id&&d.find('.q-answers a[data-id="'+n.answer_id+'"]').addClass(i?"correct":"wrong"),i||d.find('.q-answers a[data-id="'+n.correct_id+'"]').addClass("correct")}n.next_id&&e.data("next-qid",n.next_id),n._id&&a.find('[data-id="'+n._id+'"]').addClass("completed"),n.new_achievements&&corn.showPendingAchievements()}).on("pre-question",function(){NProgress.start(),m.find(".feedback-given").removeClass("feedback-given"),u.find(".tags-list").empty(),corn.checkAuth=!1}).on("go-to-results",function(){$(window).unbind("beforeunload"),window.location=i}),x.click(function(t){t.preventDefault(),e.trigger("load-question")}),w.click(function(t){t.preventDefault(),e.trigger("go-to-results")}),h.click(function(t){t.preventDefault(),e.trigger("skip")}),m.on("click","a",function(t){function n(){x.val(""),m.removeClass("show-comment"),clearInterval(m.data("commentInterval"))}function i(){var t=x.val();API.post(c,function(e){l.addClass("feedback-given"),n()},null,k({positive:f,category:h,comment:t?encodeURIComponent(t):void 0,user:corn.currentUser,source:s,session_id:e.data("id"),resource_id:u}))}if(t.preventDefault(),e.data("qid")&&!$(this).hasClass("negative-trigger")){clearTimeout(g.data("click-timeout"));var s="quiz_"+(o?"study":"test"),a=e.data("qid"),r=d.find(".explanation").data("id"),u=e.hasClass("explaining")?r:a,l=$(this).closest("[data-endpoint]"),c=l.data("endpoint"),f=$(this).hasClass("positive"),p=$(this).data("comment")||!1,m=$(this).closest(".dropdown-menu"),v=m.find("form"),x=m.find("textarea"),h=$(this).data("category")||"general";p?(t.stopPropagation(),m.addClass("show-comment"),v.off("submit").on("submit",function(e){e.preventDefault(),i()}),m.data("commentInterval",setInterval(function(){m.is(":visible")||n()},500))):i()}}),g.on("will-click",function(){o&&g.data("click-timeout",setTimeout(function(){g.trigger("click")},3e3))}).click(function(t){t.preventDefault(),clearTimeout(g.data("click-timeout")),e.removeClass("answering answered").addClass("explaining"),d.find(".q-body").stop().fadeOut(function(){d.find(".explanation").stop().fadeIn()})}),v.click(function(t){t.preventDefault(),e.removeClass("explaining"),e.data("answered")?e.addClass("answered"):e.addClass("answering"),d.find(".explanation").stop().fadeOut(function(){d.find(".q-body").stop().fadeIn()})})}})},{}],9:[function(e,t,n){$(function(){function e(){function e(){var e=Object.assign({},clouda.quizzes.feedback),i=n();e=i?Object.assign(e,i):Object.assign(e,t()),this.feedback=new clouda.components.feedback(e)}var t=function(){return{context_entity_id:null,context_entity_type:null}},n=function(){var e=window._parseURL(window.location.href),t=e.searchObject;if(!t)return null;var n=t.context_id,i=t.context_resource;return n&&i&&"lp"!==!i?{context_entity_id:parseInt(n,10),context_entity_type:"lp"}:null},i=new e,s=clouda.utils.guid();({user_id:clouda.user.corn_id,context_item_id:clouda.quizzes.quiz_config_id,context_item_type:"quiz"});clouda.events.baseEventData={session:s,source:clouda.source},ko.applyBindings(i,$("body").get(0))}var t=($("body"),$("#quiz-results")),n=$(".quiz-session-results-feedback");t.length&&n.length&&(e(),$(".js-quiz-results-answers-menu").find("a").first().click(),$(".js-quiz-content-menu").find("a").first().click())})},{}]},{},[2]);